# CHASE-119 実装ログ

## 作業日時

2025-10-28

## タスク概要

Dashboardに通知一覧を表示する機能の実装

## 実装計画

### Phase 1: BFF層実装

- [ ] 1-1. `server/api/notifications/index.get.ts` の作成
  - Backend API `/api/notifications` へのプロキシ実装
  - クエリパラメータのZod検証
  - レスポンスのZod検証
  - 認証処理（`requireUserSession`）
  - エラーハンドリング
- [ ] 1-2. ローカルでの動作確認
- [ ] 1-3. format, lint, コミット

### Phase 2: Composable実装

- [ ] 2-1. `composables/use-infinite-scroll.ts` の作成
  - スクロール位置監視ロジック
  - 追加データ読み込みロジック
  - ローディング状態管理
- [ ] 2-2. ユニットテストの作成・実行
- [ ] 2-3. format, lint, コミット

### Phase 3: コンポーネント実装

- [ ] 3-1. `NotificationCard.vue` の作成
  - 通知カードのレイアウト実装
  - データソース情報の表示
  - アクティビティグループの表示
  - デザイン要件に基づいたスタイリング
- [ ] 3-2. `NotificationCard.test.ts` の作成・実行
- [ ] 3-3. `NotificationList.vue` の作成
  - 通知一覧のレイアウト実装
  - ローディング/エラー/空状態の実装
  - NotificationCardの統合
- [ ] 3-4. `NotificationList.test.ts` の作成・実行
- [ ] 3-5. format, lint, コミット

### Phase 4: ダッシュボードページ更新

- [ ] 4-1. `DashboardPage.vue` の更新
  - `/api/notifications` API呼び出しの追加
  - リポジトリ一覧から通知一覧への切り替え
  - 無限スクロール処理の統合
  - 統計カード（未読通知数）の更新
- [ ] 4-2. Storybook更新（`DashboardPage.stories.ts`）
- [ ] 4-3. 動作確認
- [ ] 4-4. format, lint, コミット

### Phase 5: テスト実装・更新

- [ ] 5-1. Visual Regression Testの更新(更新のみで実行はしない)
- [ ] 5-2. E2E Testの更新(更新のみで実行はしない)
- [ ] 5-3. 全テストの実行・確認
  - VRT, E2Eテストはユーザーによる実行が必要なので、ここでは実行しません。
- [ ] 5-4. format, lint, コミット

### Phase 6: 最終確認・PR作成

- [ ] 6-1. 全機能の動作確認
- [ ] 6-2. デザイン要件の確認
- [ ] 6-3. 受け入れ基準のチェック
- [ ] 6-4. PR作成・レビュー依頼

## 実装詳細

### 実装するファイル

#### 新規作成

1. `packages/frontend/server/api/notifications/index.get.ts` - BFFプロキシ
2. `packages/frontend/composables/use-infinite-scroll.ts` - 無限スクロール
3. `packages/frontend/components/pages/dashboard/parts/NotificationList.vue` - 通知一覧
4. `packages/frontend/components/pages/dashboard/parts/NotificationCard.vue` - 通知カード
5. テストファイル各種

#### 更新対象

1. `packages/frontend/components/pages/dashboard/DashboardPage.vue` - メイン更新
2. `packages/frontend/components/pages/dashboard/DashboardPage.stories.ts` - Storybook
3. `packages/frontend/components/pages/dashboard/DashboardPage.vrt.spec.ts` - VRT
4. `packages/frontend/tests/dashboard.authenticated.spec.ts` - E2E

## 作業ログ

### Phase 1開始

(作業開始)

## 懸念事項・メモ

- なし（開始時点）
