# CHASE-99: ダッシュボードページUI再実装 - 作業ログ

## 作業概要

CHASE-99: ダッシュボードページの仮実装（UI再実装）

- デザイントークンに準拠したヘッダー/サイドメニューを備えた2カラムレイアウト構築
- BFF経由でウォッチ中リポジトリ一覧を表示
- レスポンシブ対応とアクセシビリティ配慮

## 実装計画

### Phase 1: レイアウト基盤コンポーネント

- [x] `ClHeader.vue` - 固定ヘッダー（ブランド/ハンバーガー/アバターメニュー）
- [x] `ClAvatarMenu.vue` - ユーザーアイコンクリックでドロップダウン（ログアウト）
- [x] `ClHamburgerButton.vue` - サイドバー開閉トグル
- [x] `ClSidebar.vue` - メニュー群、モバイル時オーバーレイ表示
- [x] `ClLayoutDashboard.vue` - 2カラムレイアウト、レスポンシブ対応

### Phase 2: ダッシュボード本体とページ専用コンポーネント

- [x] `DashboardPage.vue` - ページ本体、データ取得と状態管理
- [x] `RepositoryList.vue` - ウォッチ中リポジトリ一覧表示
- [x] `pages/dashboard.vue` - 薄型化、DashboardPageをマウント

### Phase 3: テスト・微調整

- [x] baseコンポーネントの単体テスト（既存テストの通過確認）
- [x] デザイントークン準拠のスタイル調整
- [x] アクセシビリティ改善（aria属性、フォーカス管理）
- [x] Lint, Format, Test実行

### Phase 4: 追加改善タスク

- [x] レイアウトをNuxt.js標準のlayoutsフォルダに移動（現在のレイアウトをデフォルト化）
  - [x] components/base構造整理（layouts/default/, layouts/guest/）
  - [x] ClHeader共通化と認証状態による動的表示制御
- [ ] Storybookページ作成
  - [ ] DashboardPageのStorybook
  - [ ] ClHamburgerButtonのStorybook
  - [ ] その他baseコンポーネントのStorybook
- [x] ヘッダーにThemeSelector.vueを追加
  - [x] ClThemeSelector.vueをbaseコンポーネントとして新規作成
  - [x] デザイントークン準拠のTailwindクラスに変換
  - [x] ClHeader.vueに統合（右側エリア、AvatarMenuの横に配置）
  - [x] レスポンシブ対応（モバイル時はインジケーター非表示）
  - [x] アクセシビリティ対応（aria-label、Escキーでblur）
  - [x] アイコンクリック式に変更（ドロップダウン→アイコンボタン）
    - [x] ライト/ダーク間のトグル機能（システム設定除外）
    - [x] 太陽/月アイコンの動的切り替え
    - [x] ホバー・アクティブ時のアニメーション効果
    - [x] テーマ別背景色とボーダー（黄色/青色）
    - [x] クリック時のscale変形エフェクト
- [x] RepositoryList内ラベル・ツールチップのコンポーネント化 **→ 別タスク(CHASE-114)に切り分け**
  - [x] 「リリース」ラベルのbaseコンポーネント化 **→ CHASE-114で対応**
  - [x] "Public"/"Private"ツールチップのbaseコンポーネント化 **→ CHASE-114で対応**
  - [x] 各コンポーネントのStorybookページ作成 **→ CHASE-114で対応**
- [x] baseコンポーネントのユニットテスト実装
- [x] packages/frontend/components/pages 配下のsvgタグに日本語コメントの説明を追加
- [x] ハンバーガーメニュー折り畳み機能の調査・修正

## 技術要件確認

### API

- GET `/api/data-sources` - ウォッチ中リポジトリ一覧（既存BFF利用）
- useAsyncDataでSSRファースト、CSRで重複呼び出し回避

### デザイントークン

- `docs/design/tailwind-utilities.json` のsemantic系クラス使用
- 色: `bg-surface-primary-default`, `text-content-default` など
- スペーシング: spacing/sizing/borders/radius/shadows

### アクセシビリティ

- ドロップダウン: aria属性、Escで閉じる
- モバイルサイドメニュー: フォーカストラップ、オーバーレイ

## 実装状況

- 開始日時: 2025-08-31
- 現在のフェーズ: Phase 1 準備中

## 懸念事項・メモ

- レスポンシブ時のメニュー開閉に伴うフォーカス/スクロール管理の複雑化
- SSR/CSR混在時のデータ取得の二重呼び出し防止
- ドロップダウン/オーバーレイのアクセシビリティ対応
